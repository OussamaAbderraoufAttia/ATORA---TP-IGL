<header class="bg-blue-600 text-white p-4">
  <div class="container mx-auto flex justify-between items-center">
    <h1 class="text-2xl font-bold">Radiologue Dashboard</h1>
    <nav>
      <ul class="flex space-x-4">
        <button
          class="bg-white text-blue-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition"
          (click)="navigateToProfile()"
        >
          Profile
        </button>
      </ul>
    </nav>
  </div>
</header>

<main class="container mx-auto p-4">
  <div class="w-full max-w-4xl mx-auto shadow-lg bg-white rounded-lg">
    <div class="p-6">
      <h2 class="text-3xl font-bold mb-6">Radiologue Dashboard</h2>
      <div class="w-full">
        <div class="bg-white p-6 rounded-lg shadow-lg">
          <h3 class="text-xl font-bold mb-4">Exams</h3>
          <table class="min-w-full bg-white">
            <thead>
              <tr>
                <th class="py-2 px-4 border-b">Patient Name</th>
                <th class="py-2 px-4 border-b">Exam</th>
                <th class="py-2 px-4 border-b">Status</th>
                <th class="py-2 px-4 border-b">Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let exam of exams">
                <td class="py-2 px-4 border-b">{{ exam.patientName }}</td>
                <td class="py-2 px-4 border-b">{{ exam.exam }}</td>
                <td class="py-2 px-4 border-b">{{ exam.status }}</td>
                <td class="py-2 px-4 border-b">
                  <button
                    class="bg-blue-500 text-white px-4 py-2 rounded"
                    (click)="openDialog(exam)"
                  >
                    {{ exam.status === 'Completed' ? 'Show More' : 'Update Status' }}
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</main>

<footer class="bg-blue-600 text-white p-4 mt-8">
  <div class="container mx-auto text-center">
    <p>Â© 2023 Radiologue Dashboard. All rights reserved.</p>
  </div>
</footer>

<!-- Dialog -->
<div
  *ngIf="isDialogOpen"
  class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4"
>
  <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-md mx-4">
    <h2 class="text-2xl font-bold mb-4">
      {{ selectedExam?.status === 'Completed' ? 'Exam Details' : 'Update Exam' }}
    </h2>

    <!-- Completed Exam Details -->
    <div *ngIf="selectedExam?.status === 'Completed'">
      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700">Compte Rendu:</label>
        <p class="mt-1 text-gray-600">{{ selectedExam?.compteRendu }}</p>
      </div>
      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700">Image:</label>
        <img
          [src]="selectedExam?.imagePath"
          alt="Exam Image"
          class="mt-1 w-48 h-auto rounded-lg mx-auto"
        />
      </div>
      <div class="flex justify-end">
        <button
          class="bg-blue-500 text-white px-4 py-2 rounded"
          (click)="closeDialog()"
        >
          Close
        </button>
      </div>
    </div>

    <!-- Pending Exam Form -->
    <div *ngIf="selectedExam?.status !== 'Completed'">
      <div class="mb-4">
        <label for="compteRendu" class="block text-sm font-medium text-gray-700"
          >Compte Rendu</label
        >
        <textarea
          id="compteRendu"
          name="compteRendu"
          [(ngModel)]="selectedExam!.compteRendu"
          class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm"
          rows="4"
          placeholder="Enter compte rendu"
        ></textarea>
      </div>

      <div class="mb-4">
        <label for="radio" class="block text-sm font-medium text-gray-700"
          >Upload Image</label
        >
        <input
          type="file"
          id="radio"
          (change)="onFileSelect($event)"
          class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm"
          accept=".png, .tiff, .jpeg, .jpg"
        />
      </div>

      <div class="flex justify-end">
        <button
          class="bg-gray-500 text-white px-4 py-2 rounded mr-2"
          (click)="closeDialog()"
        >
          Cancel
        </button>
        <button
          class="bg-blue-500 text-white px-4 py-2 rounded"
          (click)="onSubmit()"
        >
          Submit
        </button>
      </div>
    </div>
  </div>
</div>